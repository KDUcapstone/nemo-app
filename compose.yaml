name: nemo
services:
  nginx-dev:
    image: nginx:1.27-alpine
    container_name: nemo-nginx-dev
    ports:
      - "8085:80"                              # http://localhost:8085
    volumes:
      - ./infra/nginx/nemo.dev.conf:/etc/nginx/nginx.conf:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"    # Linux 호환 (Win/macOS는 무시되어도 OK)
    profiles: ["dev"]

  nginx-prod:
    image: nginx:1.27-alpine
    container_name: nemo-nginx-prod
    ports:
      - "8085:80"
    volumes:
      - ./frontend/build/web:/usr/share/nginx/html:ro
      - ./infra/nginx/nemo.prod.conf:/etc/nginx/conf.d/default.conf:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    profiles: ["prod"]
