# ============================================
# ğŸš€ application-prod.yml
# - ì‹¤ì œ ë°°í¬ìš© ì„¤ì • (Docker / Cloud í™˜ê²½)
# - DB, JWT, S3, ì™¸ë¶€ API í‚¤ëŠ” ì „ë¶€ í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
# ============================================

spring:
  datasource:
    driver-class-name: org.mariadb.jdbc.Driver

    # â— ì»¨í…Œì´ë„ˆ/í´ë¼ìš°ë“œ ë‚´ë¶€ í†µì‹ ìš© DB ì£¼ì†Œ
    # - DB_HOST, DB_PORTëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ì£¼ì…
    # - ê¸°ë³¸ê°’ì€ nemo-db:3306 (docker-composeì—ì„œ ì„œë¹„ìŠ¤ ì´ë¦„ì´ nemo-dbì¼ ë•Œ)
    url: jdbc:mariadb://svc.sel5.cloudtype.app:30303/nemo?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Seoul

    username: ${DB_USER}       # í™˜ê²½ë³€ìˆ˜(ì‹œí¬ë¦¿)ë¡œ ì„¤ì •
    password: ${DB_PASSWORD}   # í™˜ê²½ë³€ìˆ˜(ì‹œí¬ë¦¿)ë¡œ ì„¤ì •

  jpa:
    database-platform: org.hibernate.dialect.MariaDBDialect
    hibernate:
      ddl-auto: validate       # ìš´ì˜: ìŠ¤í‚¤ë§ˆëŠ” ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê³  validateë§Œ
    show-sql: false
    properties:
      hibernate.format_sql: true

# =========================
# ğŸ” JWT / ì•± ê³µí†µ ì„¤ì •
# =========================
app:
  jwt:
    # ìš´ì˜ì—ì„œëŠ” ë°˜ë“œì‹œ í™˜ê²½ë³€ìˆ˜ë¡œ ë„£ê¸°
    secret: ${JWT_SECRET}
    issuer: "nemo-backend"
    # ê¸°ë³¸ê°’ì€ 15ë¶„, í•„ìš”í•˜ë©´ í™˜ê²½ë³€ìˆ˜ë¡œ ì¡°ì •
    access-ttl-ms: ${JWT_ACCESS_TTL_MS:900000}

  # =========================
  # â˜ S3 ì„¤ì • (ì‹¤ì œ AWS ì‚¬ìš© ê¸°ì¤€)
  # =========================
  s3:
    # ì‹¤ì œ ìš´ì˜ ë²„í‚· ì´ë¦„ (í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬ ê¶Œì¥)
    bucket: ${AWS_S3_BUCKET:nemo-prod-photos}
    region: ap-northeast-2

    # AWS S3 ì •ì‹ ì—”ë“œí¬ì¸íŠ¸ (LocalStack ì•„ë‹˜)
    endpoint: https://s3.ap-northeast-2.amazonaws.com

    accessKey: ${AWS_ACCESS_KEY_ID}
    secretKey: ${AWS_SECRET_ACCESS_KEY}

    # AWS ì •ì‹ S3ëŠ” pathStyle = false ê¶Œì¥
    pathStyle: false
    # ìš´ì˜ì—ì„œëŠ” ë²„í‚·ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê³ , ìë™ ìƒì„±ì€ ë„ëŠ” ê±¸ ì¶”ì²œ
    createBucketIfMissing: false

  # í”„ë¡ íŠ¸/ê³µìœ  ë§í¬ì—ì„œ ì“¸ API ê¸°ë³¸ ì£¼ì†Œ
  public-base-url: ${PUBLIC_BASE_URL:https://api.nemo.app}

# =========================
# ğŸŒ ë„¤ì´ë²„ ë¡œì»¬ ê²€ìƒ‰ API
# =========================
naver:
  openapi:
    local:
      endpoint: https://openapi.naver.com/v1/search/local.json
      client-id: ${NAVER_LOCAL_CLIENT_ID}
      client-secret: ${NAVER_LOCAL_CLIENT_SECRET}

# =========================
# ğŸŒ ì„œë²„ ê³µí†µ ì„¤ì •
# =========================
server:
  tomcat:
    uri-encoding: UTF-8        # ì¿¼ë¦¬/í¼ íŒŒë¼ë¯¸í„° UTF-8 ì²˜ë¦¬
